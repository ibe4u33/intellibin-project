<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrashTracker - Environmental Monitoring</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2e7d32;
            --primary-light: #4caf50;
            --primary-dark: #1b5e20;
            --secondary: #ff9800;
            --danger: #f44336;
            --gray: #f5f5f5;
            --dark-gray: #424242;
            --text: #212121;
            --text-light: #757575;
        }

        body {
            background-color: #f9f9f9;
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--primary);
            font-size: 28px;
        }

        .logo h1 {
            font-size: 24px;
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover, nav a.active {
            color: var(--primary);
        }

        .user-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
        }

        .hero h2 {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .hero p {
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto 25px;
        }

        /* Dashboard Section */
        .dashboard {
            padding: 50px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title h2 {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .section-title p {
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .stat-card i {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .stat-card.bins i {
            color: var(--primary);
        }

        .stat-card.full i {
            color: var(--danger);
        }

        .stat-card.collected i {
            color: var(--secondary);
        }

        .stat-card.area i {
            color: var(--primary-light);
        }

        .stat-card h3 {
            font-size: 32px;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: var(--text-light);
        }

        /* Bins Grid */
        .bins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .bin-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .bin-card:hover {
            transform: translateY(-5px);
        }

        .bin-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
        }

        .bin-id {
            font-weight: 600;
            color: var(--text);
        }

        .bin-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-empty {
            background-color: #e8f5e9;
            color: var(--primary);
        }

        .status-medium {
            background-color: #fff3e0;
            color: var(--secondary);
        }

        .status-full {
            background-color: #ffebee;
            color: var(--danger);
        }

        .bin-content {
            padding: 20px;
        }

        .bin-location {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            color: var(--text-light);
        }

        .bin-location i {
            font-size: 16px;
        }

        .bin-progress {
            margin-bottom: 20px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s;
        }

        .progress-empty {
            width: 20%;
            background-color: var(--primary);
        }

        .progress-medium {
            width: 65%;
            background-color: var(--secondary);
        }

        .progress-full {
            width: 95%;
            background-color: var(--danger);
        }

        .bin-actions {
            display: flex;
            justify-content: space-between;
        }

        /* Map Section */
        .map-section {
            padding: 50px 0;
            background-color: var(--gray);
        }

        .map-container {
            height: 500px;
            background-color: #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        #accraHeatMap {
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .map-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 250px;
            z-index: 1000;
        }

        .map-overlay h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .map-legend {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }

        .legend-empty {
            background-color: var(--primary);
        }

        .legend-medium {
            background-color: var(--secondary);
        }

        .legend-full {
            background-color: var(--danger);
        }

        .heatmap-legend {
            display: flex;
            height: 20px;
            width: 100%;
            background: linear-gradient(to right, blue, cyan, green, yellow, red);
            border-radius: 4px;
            margin-top: 10px;
        }

        .heatmap-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
        }

        /* Footer */
        footer {
            background-color: var(--dark-gray);
            color: white;
            padding: 40px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: white;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column a {
            color: #bdbdbd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #616161;
            color: #bdbdbd;
            font-size: 14px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                gap: 15px;
            }

            .hero h2 {
                font-size: 28px;
            }

            .hero p {
                font-size: 16px;
            }

            .map-overlay {
                position: relative;
                top: 0;
                right: 0;
                width: 100%;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-recycle"></i>
                    <h1>inTelliBin</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="active">Dashboard</a></li>
                        <li><a href="#">Map View</a></li>
                        <li><a href="#">Analytics</a></li>
                        <li><a href="#">Alerts</a></li>
                        <li><a href="#">Settings</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <button class="btn btn-outline"><i class="fas fa-bell"></i></button>
                    <button class="btn btn-primary"><i class="fas fa-user"></i> Admin</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Smart Waste Management System</h2>
            <p>Monitor trash levels in real-time, optimize collection routes, and combat environmental pollution with our IoT-enabled solution.</p>
            <button class="btn btn-outline" style="background-color: white; color: var(--primary);">View Live Map</button>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section class="dashboard">
        <div class="container">
            <div class="section-title">
                <h2>Bin Status Dashboard</h2>
                <p>Real-time monitoring of trash levels across all connected bins in your area</p>
            </div>

            <div class="stats-cards">
                <div class="stat-card bins">
                    <i class="fas fa-trash-alt"></i>
                    <h3 id="totalBins">42</h3>
                    <p>Total Bins</p>
                </div>
                <div class="stat-card full">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3 id="fullBins">8</h3>
                    <p>Full Bins</p>
                </div>
                <div class="stat-card collected">
                    <i class="fas fa-truck-loading"></i>
                    <h3 id="collectedBins">127</h3>
                    <p>Collections Today</p>
                </div>
                <div class="stat-card area">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>3.2</h3>
                    <p>Square Miles Covered</p>
                </div>
            </div>

            <div class="bins-grid" id="binsContainer">
                <!-- Bins will be dynamically generated here -->
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section">
        <div class="container">
            <div class="section-title">
                <h2>Accra Central - Bin Locations</h2>
                <p>All 42 bins with real-time status across Accra Central</p>
            </div>

            <div class="map-container">
                <div id="accraHeatMap"></div>
                
                <div class="map-overlay">
                    <h3>Map Legend</h3>
                    <div class="map-legend">
                        <div class="legend-item">
                            <div class="legend-color legend-empty"></div>
                            <span>Empty Bin (0-30%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-medium"></div>
                            <span>Medium Bin (31-80%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-full"></div>
                            <span>Full Bin (81-100%)</span>
                        </div>
                    </div>
                    
                    <h4 style="margin-top: 15px;">Crowd Density</h4>
                    <div class="heatmap-legend"></div>
                    <div class="heatmap-labels">
                        <span>Low</span>
                        <span>High</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>TrashTracker</h3>
                    <p>Smart waste management solutions for a cleaner environment.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Dashboard</a></li>
                        <li><a href="#">Map View</a></li>
                        <li><a href="#">Analytics</a></li>
                        <li><a href="#">Alerts</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">API Reference</a></li>
                        <li><a href="#">Support</a></li>
                        <li><a href="#">Community</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> support@trashtracker.com</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Green Street, Eco City</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 TrashTracker. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Heatmap Plugin -->
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

    <script>
        // Initialize the map centered on Accra Central
        const map = L.map('accraHeatMap').setView([5.5500, -0.2167], 14);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Define crowd density data for Accra Central (simulated)
        const crowdData = [
            [5.5557, -0.1966, 0.9],  // Makola Market - High density
            [5.5530, -0.2000, 0.8],  // Tudu
            [5.5570, -0.2100, 0.7],  // Adabraka
            [5.5500, -0.2050, 0.8],  // Kwame Nkrumah Circle
            [5.5450, -0.1950, 0.6],  // Jamestown
            [5.5600, -0.2150, 0.7],  // Kaneshie
            [5.5480, -0.2100, 0.5],  // Osu
            [5.5520, -0.2250, 0.6],  // Ministries
        ];

        // Create heatmap layer
        const heat = L.heatLayer(crowdData, {
            radius: 25,
            blur: 15,
            maxZoom: 17,
            gradient: {
                0.4: 'blue',
                0.6: 'cyan',
                0.7: 'lime',
                0.8: 'yellow',
                1.0: 'red'
            }
        }).addTo(map);

        // Generate 42 bin locations across Accra Central
        function generateBinLocations() {
            const bins = [];
            const centerLat = 5.5500;
            const centerLng = -0.2167;
            const radius = 0.02; // Approximately 2km radius
            
            for (let i = 1; i <= 42; i++) {
                // Generate random positions within Accra Central area
                const lat = centerLat + (Math.random() - 0.5) * radius;
                const lng = centerLng + (Math.random() - 0.5) * radius;
                
                // Random status with weighted probability (more empty/medium than full)
                const statusRand = Math.random();
                let status, capacity;
                
                if (statusRand < 0.6) {
                    status = 'empty';
                    capacity = Math.floor(Math.random() * 30);
                } else if (statusRand < 0.85) {
                    status = 'medium';
                    capacity = 30 + Math.floor(Math.random() * 50);
                } else {
                    status = 'full';
                    capacity = 80 + Math.floor(Math.random() * 20);
                }
                
                bins.push({
                    id: `TR-${i.toString().padStart(3, '0')}`,
                    lat: lat,
                    lng: lng,
                    status: status,
                    capacity: capacity,
                    location: getRandomLocationName(i)
                });
            }
            return bins;
        }

        // Helper function to generate realistic location names
        function getRandomLocationName(index) {
            const locations = [
                'Makola Market', 'Kwame Nkrumah Ave', 'Kojo Thompson Rd', 
                'Kinbu Rd', 'Tudu', 'Adabraka', 'Kaneshie', 'Ministries',
                'High Street', 'Ring Road', 'Independence Ave', 'Castle Rd',
                'Osu', 'Jamestown', 'Korle Bu', 'Circle', 'Nkrumah Circle',
                'Rawlings Park', 'Makola Shopping', 'Tema Station', 'UTC',
                'Accra Central', 'CBD', 'Business District', 'Market Circle'
            ];
            return locations[index % locations.length] + ` Area ${Math.floor(index / locations.length) + 1}`;
        }

        // Define bin icons based on status
        function getBinIcon(status) {
            const color = status === 'full' ? 'red' : status === 'medium' ? 'orange' : 'green';
            
            return L.divIcon({
                className: 'bin-marker',
                html: `<div style="background-color: ${color}; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,
                iconSize: [20, 20],
                iconAnchor: [10, 10]
            });
        }

        // Generate and add all 42 bins to the map
        const allBins = generateBinLocations();
        
        // Count bins by status for statistics
        let emptyCount = 0;
        let mediumCount = 0;
        let fullCount = 0;

        allBins.forEach(bin => {
            if (bin.status === 'empty') emptyCount++;
            else if (bin.status === 'medium') mediumCount++;
            else if (bin.status === 'full') fullCount++;
            
            L.marker([bin.lat, bin.lng], { icon: getBinIcon(bin.status) })
                .addTo(map)
                .bindPopup(`
                    <b>Bin ${bin.id}</b><br>
                    Status: ${bin.status.toUpperCase()}<br>
                    Capacity: ${bin.capacity}%<br>
                    Location: ${bin.location}
                `);
        });

        // Update statistics
        document.getElementById('fullBins').textContent = fullCount;

        // Generate bin cards for the dashboard (show first 6 as examples)
        function generateBinCards() {
            const binsContainer = document.getElementById('binsContainer');
            binsContainer.innerHTML = '';
            
            // Show first 6 bins as examples in the dashboard
            allBins.slice(0, 6).forEach(bin => {
                const progressClass = `progress-${bin.status}`;
                const statusClass = `status-${bin.status}`;
                const statusText = bin.status.charAt(0).toUpperCase() + bin.status.slice(1);
                
                const binCard = `
                    <div class="bin-card">
                        <div class="bin-header">
                            <span class="bin-id">Bin ${bin.id}</span>
                            <span class="bin-status ${statusClass}">${statusText}</span>
                        </div>
                        <div class="bin-content">
                            <div class="bin-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${bin.location}</span>
                            </div>
                            <div class="bin-progress">
                                <div class="progress-label">
                                    <span>Capacity</span>
                                    <span>${bin.capacity}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill ${progressClass}" style="width: ${bin.capacity}%"></div>
                                </div>
                            </div>
                            <div class="bin-actions">
                                <button class="btn btn-primary">Schedule Pickup</button>
                                <button class="btn btn-outline">Details</button>
                            </div>
                        </div>
                    </div>
                `;
                
                binsContainer.innerHTML += binCard;
            });
        }

        // Initialize the dashboard
        generateBinCards();

        // Real-time updates simulation
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Update random bins
                const randomIndex = Math.floor(Math.random() * allBins.length);
                const bin = allBins[randomIndex];
                
                // Simulate change in capacity
                const change = Math.floor(Math.random() * 20) - 5; // -5 to +15
                bin.capacity = Math.max(0, Math.min(100, bin.capacity + change));
                
                // Update status based on new capacity
                if (bin.capacity <= 30) {
                    bin.status = 'empty';
                } else if (bin.capacity <= 80) {
                    bin.status = 'medium';
                } else {
                    bin.status = 'full';
                }
                
                // Update statistics
                emptyCount = allBins.filter(b => b.status === 'empty').length;
                mediumCount = allBins.filter(b => b.status === 'medium').length;
                fullCount = allBins.filter(b => b.status === 'full').length;
                
                document.getElementById('fullBins').textContent = fullCount;
                
                // In a real app, you would update the map markers and dashboard here
                console.log(`Updated bin ${bin.id}: ${bin.capacity}% (${bin.status})`);
                
            }, 5000); // Update every 5 seconds
        }

        // Start real-time updates
        simulateRealTimeUpdates();

        // Simple JavaScript to demonstrate dynamic updates for the displayed bins
        document.addEventListener('DOMContentLoaded', function() {
            setInterval(function() {
                const statusElements = document.querySelectorAll('.bin-status');
                statusElements.forEach(el => {
                    if (el.classList.contains('status-empty')) {
                        el.classList.remove('status-empty');
                        el.classList.add('status-medium');
                        el.textContent = 'Medium';
                    } else if (el.classList.contains('status-medium')) {
                        el.classList.remove('status-medium');
                        el.classList.add('status-full');
                        el.textContent = 'Full';
                    } else {
                        el.classList.remove('status-full');
                        el.classList.add('status-empty');
                        el.textContent = 'Empty';
                    }
                });
            }, 10000);
        });
    </script>
</body>
</html>